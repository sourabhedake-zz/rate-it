<div id="Carousel1" class="new-products">
<h1>Most Viewed</h1>
<%if Latest.count >0 %>

<div id="myCarousel1" class="carousel slide" data-ride="carousel" style="height: 380px;">
  <% @latests=Latest.one.latestproducts.order_by(:views => "desc").limit(3) %>
  
  <!-- Carousel indicators -->
  <% @count = 0 %>
  <ol class="carousel-indicators">
    <% for latest in @latests %>
    <% if @count==0 %>
    <li data-target="#myCarousel1" data-slide-to="<%=@count %>"class="active" ></li>
    <% else %>
    <li data-target="#myCarousel1" data-slide-to="<%=@count %>"></li>
    <% end %>

    <% @count = @count+1 %>
    <% end %>
  </ol>

  <% @count=0 %>
  <!-- Wrapper for carousel items -->
  <div class="carousel-inner">
    <% for latest in @latests %>
    <% if @count==0 %>
    <div class="item active">
      <%= link_to(image_tag(latest.image.url, :alt => "second Slide", :width => "400px", :height => "400px", :title => "Product"), '/products/'+latest.product_name) %>
    </div>
    <% else %>
    <div class="item">
      <%= link_to(image_tag(latest.image.url, :alt => "second Slide", :width => "300px", :height => "300px", :title => "Product"), '/products/'+latest.product_name) %>
    </div>
    <% end %>
    <% @count=@count+1 %>
    <% end %>
    
  </div>

  <ol class="carousel-indicators">
    <li data-target="#myCarousel1" data-slide-to="3"></li>
  </ol>

  <!-- Carousel controls -->
  <a class="carousel-control left" href="#myCarousel1" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
  </a>
  <a class="carousel-control right" href="#myCarousel1" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
  </a>
</div>

</div>
<% end %>
